# specs/001A-infrastructure/tasks/T-004.md

## Task: Health Endpoint Contract Tests

## Type
contract-test

## Context
- **Phase**: Contracts & Interfaces
- **Builds on**: None
- **Blocks**: T-008 (FastAPI App Implementation), T-009 (Health Endpoint Implementation)

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|

## Scope
- **CREATE**: `backend/tests/test_health_contract.py`

## Contract
```python
# Health endpoint
@router.get("/health")
async def health() -> dict:
    """Returns {"status": "ok"} with 200 status code"""
    ...

# FastAPI app with health endpoint mounted
def create_app() -> FastAPI:
    """Creates FastAPI app with /api/health endpoint"""
    ...
```

## Logic
1. Create test_health_contract.py with health endpoint tests
2. Test GET /api/health returns 200 status code
3. Test response body is exactly {"status": "ok"}
4. Test response Content-Type is application/json
5. Test endpoint does not require authentication
6. Test endpoint includes X-Request-ID header in response
7. Test CORS headers are present in response

## Verification
- [ ] test_health_endpoint_status_200() asserts 200 response
- [ ] test_health_endpoint_response_body() asserts {"status": "ok"}
- [ ] test_health_endpoint_content_type() asserts application/json
- [ ] test_health_endpoint_no_auth_required() asserts no 401 error
- [ ] test_health_endpoint_request_id_header() asserts X-Request-ID present
- [ ] test_health_endpoint_cors_headers() asserts CORS headers present

## LOC Estimate
~35 lines