# specs/001A-infrastructure/tasks/T-005.md

## Task: Docker Integration Tests

## Type
integration-test

## Context
- **Phase**: Test Infrastructure
- **Builds on**: None
- **Blocks**: T-010 (Docker Compose Setup)
- **Requirements**: FR-INFRA-010, FR-INFRA-011

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|

## Scope
- **CREATE**: `backend/tests/test_docker_integration.py`

## Contract
```python
# Docker Compose services
services:
  db:
    image: postgres:18
    healthcheck: pg_isready -U canvas
  backend:
    build: ./backend
    depends_on: db (healthy)
  frontend:
    build: ./frontend
    depends_on: backend (healthy)
```

## Logic
1. Create test_docker_integration.py with Docker service tests
2. Test PostgreSQL container starts and passes health check
3. Test pg_isready command succeeds with correct user
4. Test PostgreSQL accepts connections on port 5432
5. Test database can execute simple queries
6. Test container networking allows backend to connect to db
7. Test service dependency ordering works correctly

## Verification
- [ ] test_postgres_container_starts() asserts container runs
- [ ] test_postgres_health_check() asserts pg_isready succeeds
- [ ] test_postgres_accepts_connections() asserts port 5432 accessible
- [ ] test_postgres_executes_queries() asserts SELECT 1 works
- [ ] test_backend_connects_to_db() asserts network connectivity
- [ ] test_service_dependency_order() asserts depends_on works

## LOC Estimate
~40 lines