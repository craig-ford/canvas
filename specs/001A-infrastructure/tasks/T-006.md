# specs/001A-infrastructure/tasks/T-006.md

## Task: Backend Core Implementation

## Type
implementation

## Context
- **Phase**: Phase 4: Core Logic
- **Builds on**: T-001 (Base Model Contract Tests), T-002 (Config Contract Tests)
- **Blocks**: T-007 (Database Implementation), T-008 (FastAPI App Implementation)

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|
| T-001 | tests/test_models.py | TimestampMixin from models/__init__.py |
| T-002 | tests/test_config.py | Settings from config.py |

## Scope
- **CREATE**: `backend/canvas/models/__init__.py`
- **CREATE**: `backend/canvas/config.py`
- **CREATE**: `backend/canvas/__init__.py`

## Contract
```python
# models/__init__.py
import uuid
from datetime import datetime
from sqlalchemy import Column, DateTime, func
from sqlalchemy.dialects.postgresql import UUID

class TimestampMixin:
    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)
    created_at = Column(DateTime(timezone=True), server_default=func.now(), nullable=False)
    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now(), nullable=False)

def success_response(data, status_code=200):
    """Return success response envelope."""
    ...

def list_response(data, total, page=1, per_page=25):
    """Return paginated list response envelope."""
    ...

# config.py
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    database_url: str
    cors_origins: str
    log_level: str
    secret_key: str
    
    class Config:
        env_prefix = "CANVAS_"
```

## Logic
1. Create backend/canvas/models/__init__.py with TimestampMixin and response helpers
2. Create backend/canvas/config.py with Pydantic Settings class
3. Create backend/canvas/__init__.py as package marker

## Verification
- [ ] TimestampMixin has UUID primary key with default uuid4
- [ ] TimestampMixin has created_at and updated_at with server defaults
- [ ] success_response returns data + meta with timestamp
- [ ] list_response returns data + meta with pagination fields
- [ ] Settings loads all CANVAS_ prefixed environment variables
- [ ] All imports resolve without error

## LOC Estimate
~50 lines