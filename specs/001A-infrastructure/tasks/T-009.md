# specs/001A-infrastructure/tasks/T-009.md

## Task: Health Endpoint Implementation

## Type
implementation

## Context
- **Phase**: API Layer
- **Builds on**: T-008 (FastAPI app factory)
- **Blocks**: T-010 (Docker Compose setup)
- **Requirements**: FR-INFRA-010

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|
| T-008 | backend/canvas/main.py | create_app function |

## Scope
- **MODIFY**: `backend/canvas/main.py`

## Contract
```python
@app.get("/api/health")
async def health() -> dict:
    """Health check endpoint.
    
    Returns:
        dict: {"status": "ok"}
    """
    ...
```

## Logic
1. Add health endpoint function to main.py
2. Define async function health() that returns {"status": "ok"}
3. Decorate with @app.get("/api/health")
4. Modify create_app() to include the health route
5. Add app instance creation at module level for route decoration

## Verification
- [ ] Health endpoint returns {"status": "ok"}
- [ ] Route is accessible at /api/health
- [ ] Function is async
- [ ] App factory still works correctly

## LOC Estimate
~10 lines