# specs/003-portfolio-dashboard/tasks/T-017.md

## Task: Portfolio Notes Implementation

## Type
implementation

## Context
- **Phase**: Phase 6 - UI
- **Builds on**: T-012 (Portfolio Notes Component Tests)
- **Blocks**: None

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|
| 001-auth | frontend/src/auth/useAuth.ts | 001-auth/T-016 | `import { useAuth } from '../auth/useAuth'` |
| 001A-infrastructure/T-011 | frontend/src/api/client.ts | 001A-infrastructure/T-011 | `import { api } from '../api/client'` |

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|
| T-012 | frontend/src/dashboard/PortfolioNotes.test.tsx | Test contracts for component behavior |

## Scope
- **CREATE**: `frontend/src/dashboard/PortfolioNotes.tsx`

## Contract
```typescript
interface PortfolioNotesProps {}

const PortfolioNotes: React.FC<PortfolioNotesProps> = () => {
  // Returns null for non-admin users
  // Returns textarea with autosave for admin users
  // Implements 500ms debounced API calls
  // Shows save status indicators
  // Includes proper accessibility attributes
};

export default PortfolioNotes;
```

## Logic
1. Import React hooks, useAuth, and API client
2. Define save status type and state management
3. Implement useCallback with debounce for autosave
4. Handle textarea change events with debounced save
5. Return null for non-admin users (role-based rendering)
6. Render textarea with proper accessibility attributes
7. Display save status with aria-live region
8. Apply Tailwind classes for styling

## Verification
- [ ] Component returns null for non-admin users
- [ ] Textarea has maxLength={10000} constraint
- [ ] Debounced autosave triggers after 500ms delay
- [ ] Save status updates correctly (saved/saving/error)
- [ ] Accessibility attributes are complete
- [ ] API calls use correct endpoint and payload

## LOC Estimate
~80 lines