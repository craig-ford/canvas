# specs/003-portfolio-dashboard/tasks/T-009.md

## Task: Dashboard Page Component Tests

## Type
unit-test

## Context
- **Phase**: Phase 2 - Test Infrastructure
- **Builds on**: None
- **Blocks**: T-014 (Dashboard Page Implementation)
- **Requirements**: FR-001

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|
| 001-auth | frontend/src/auth/useAuth.ts | 001-auth/T-016 | `import { useAuth } from '../auth/useAuth'` |

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|
| None | | |

## Scope
- **CREATE**: `frontend/src/dashboard/__tests__/DashboardPage.test.tsx`

## Contract
```typescript
// Test suite for DashboardPage component
describe('DashboardPage', () => {
  test('renders loading state initially'): void
  test('renders empty state when no VBUs found'): void
  test('renders VBU table when data loaded'): void
  test('updates filters and refetches data'): void
  test('handles API error gracefully'): void
  test('shows portfolio notes for admin users'): void
  test('hides portfolio notes for non-admin users'): void
  test('applies responsive layout classes'): void
  test('has proper accessibility attributes'): void
})
```

## Logic
1. Import React Testing Library, MSW for API mocking
2. Mock useAuth hook with different user roles
3. Mock API responses for portfolio summary endpoint
4. Test loading state with skeleton UI
5. Test empty state with clear filters button
6. Test successful data rendering with VBU table
7. Test filter changes trigger API refetch
8. Test error handling with retry functionality
9. Test admin-only portfolio notes visibility
10. Test responsive breakpoint classes
11. Test ARIA labels and keyboard navigation

## Verification
- [ ] All test methods contain assertions
- [ ] Loading, empty, and error states tested
- [ ] Role-based UI visibility tested
- [ ] Responsive layout tested
- [ ] Accessibility attributes tested

## LOC Estimate
~120 lines