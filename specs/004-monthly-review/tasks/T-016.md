# specs/004-monthly-review/tasks/T-016.md

## Task: ReviewHistory Component

## Type
implementation

## Context
- **Phase**: Phase 6 - UI
- **Builds on**: T-014 (FastAPI Routes Implementation)
- **Blocks**: T-018 (End-to-End Integration)

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|
| 002-canvas-management | frontend/src/api/client.ts | 001A-infrastructure/T-011 | `import { apiClient } from '../api/client'` |

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|
| T-014 | backend/canvas/reviews/router.py | Review API endpoints for data fetching |

## Scope
- **CREATE**: `frontend/src/reviews/ReviewHistory.tsx`

## Contract
```typescript
interface ReviewHistoryProps {
  canvasId: string;
}

interface ReviewData {
  id: string;
  canvas_id: string;
  review_date: string;
  what_moved: string | null;
  what_learned: string | null;
  what_threatens: string | null;
  currently_testing_type: string | null;
  currently_testing_id: string | null;
  created_by: string;
  created_at: string;
  commitments: Array<{
    id: string;
    text: string;
    order: number;
  }>;
  attachments: Array<{
    id: string;
    filename: string;
    label: string | null;
    size_bytes: number;
  }>;
}

export default function ReviewHistory({ canvasId }: ReviewHistoryProps): JSX.Element;
```

## Logic
1. Import React hooks and API client
2. Define ReviewData interface matching API response
3. Create state for reviews list and expanded review IDs
4. Implement useEffect to fetch reviews on mount
5. Create toggle function for expand/collapse
6. Render review list with date, excerpt, counts
7. Render expanded view with full content when toggled
8. Format dates and file sizes for display
9. Render loading spinner (`<div className="animate-spin">`) while fetching; render error message with retry button if fetch fails; render "No reviews yet" empty state if list is empty

## Verification
- [ ] Imports resolve without error
- [ ] Component renders review list correctly
- [ ] Expand/collapse functionality works
- [ ] Displays review content, commitments, attachments
- [ ] Handles empty state gracefully
- [ ] Loading and error states implemented

## LOC Estimate
~120 lines