# specs/002-canvas-management/tasks/T-022.md

## Task: VBU Canvas Page

## Type
implementation

## Context
- **Phase**: Phase 6 (UI)
- **Builds on**: T-019 (InlineEdit), T-020 (StatusBadge), T-021 (FileUpload)
- **Blocks**: T-023 (Canvas API Client)

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|
| T-019 | frontend/src/components/InlineEdit.tsx | InlineEdit component with autosave |
| T-020 | frontend/src/components/StatusBadge.tsx | StatusBadge component with dropdown |
| T-021 | frontend/src/components/FileUpload.tsx | FileUpload component with drag-and-drop |

## Scope
- **CREATE**: `frontend/src/canvas/CanvasPage.tsx`

## Contract
```typescript
interface CanvasPageProps {
  vbuId: string;
}

interface Canvas {
  id: string;
  vbu_id: string;
  product_name?: string;
  lifecycle_lane: 'build' | 'sell' | 'milk' | 'reframe';
  success_description?: string;
  future_state_intent?: string;
  primary_focus?: string;
  resist_doing?: string;
  good_discipline?: string;
  primary_constraint?: string;
  currently_testing_type?: 'thesis' | 'proof_point';
  currently_testing_id?: string;
  theses: Thesis[];
}

interface Thesis {
  id: string;
  order: number;
  text: string;
  proof_points: ProofPoint[];
}

interface ProofPoint {
  id: string;
  description: string;
  status: 'not_started' | 'in_progress' | 'observed' | 'stalled';
  evidence_note?: string;
  target_review_month?: string;
  attachments: Attachment[];
}

interface Attachment {
  id: string;
  filename: string;
  content_type: string;
  size_bytes: number;
  label?: string;
  uploaded_by: string;
  created_at: string;
}

const CanvasPage: React.FC<CanvasPageProps> = ({ vbuId }) => {
  // Main canvas page with all sections from wireframe
  // Uses InlineEdit for all text fields with autosave
  // Uses StatusBadge for proof point status
  // Uses FileUpload for proof point attachments
  // Implements drag-to-reorder for theses
  // Searchable dropdown for currently testing
  ...
}
```

## Logic
1. Import React hooks, components, and types
2. Import InlineEdit, StatusBadge, FileUpload from components
3. Define Canvas, Thesis, ProofPoint, Attachment interfaces
4. Create CanvasPage component with vbuId prop
5. Add state for canvas data, loading, error, autosave status
6. Implement mock data loading (API integration in T-024)
7. Create header section with VBU name, back link, review button
8. Add autosave status bar with last updated info
9. Build Context Section with product_name, lifecycle_lane selector, success_description, future_state_intent
10. Build Strategic Focus section with primary_focus, resist_doing, good_discipline, primary_constraint
11. Build Strategic Theses section with drag-to-reorder, proof points, attachments
12. Add Currently Testing searchable dropdown
13. Implement lifecycle lane selection with visual states
14. Handle thesis reordering with optimistic updates
15. Apply Tailwind styling matching wireframe layout

## Verification
- [ ] Page renders with correct layout sections
- [ ] Header shows VBU name and navigation
- [ ] Autosave status bar displays correctly
- [ ] Context section uses InlineEdit for text fields
- [ ] Lifecycle lane selector works with visual feedback
- [ ] Strategic Focus section uses InlineEdit components
- [ ] Theses display with drag handles and reordering
- [ ] Proof points use StatusBadge and FileUpload
- [ ] Currently Testing dropdown is searchable
- [ ] All sections match wireframe layout
- [ ] TypeScript types are complete
- [ ] Responsive design works on mobile

## LOC Estimate
~200 lines