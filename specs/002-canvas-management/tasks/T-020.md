# specs/002-canvas-management/tasks/T-020.md

## Task: StatusBadge Component

## Type
implementation

## Context
- **Phase**: Phase 6 (UI)
- **Builds on**: None
- **Blocks**: T-022 (VBU Canvas Page)
- **Requirements**: FR-006

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|

## Scope
- **CREATE**: `frontend/src/components/StatusBadge.tsx`

## Contract
```typescript
interface StatusBadgeProps {
  status: 'not_started' | 'in_progress' | 'observed' | 'stalled';
  onChange?: (status: string) => void;
  readonly?: boolean;
}

const StatusBadge: React.FC<StatusBadgeProps> = ({ status, onChange, readonly }) => {
  // Colored badge with status text
  // Dropdown for status change when onChange provided
  // Colors: not_started=gray, in_progress=teal, observed=green, stalled=yellow
  // Readonly mode shows badge without dropdown
  ...
}
```

## Logic
1. Import React hooks (useState, useRef, useEffect)
2. Import Heroicons for dropdown chevron
3. Define status color mapping with Tailwind classes
4. Define status display text mapping
5. Implement dropdown state management (open/closed)
6. Add click outside handler to close dropdown
7. Handle status selection and onChange callback
8. Apply status-specific colors to badge
9. Show dropdown only when onChange provided and not readonly
10. Add keyboard navigation (Enter, Escape, Arrow keys)

## Verification
- [ ] Badge displays with correct color for each status
- [ ] Dropdown appears when onChange provided and not readonly
- [ ] Status selection triggers onChange callback
- [ ] Click outside closes dropdown
- [ ] Readonly mode shows badge without interaction
- [ ] Keyboard navigation works correctly
- [ ] Colors match specification (gray/teal/green/yellow)
- [ ] Status text is human-readable
- [ ] TypeScript types are complete
- [ ] Component is accessible

## LOC Estimate
~70 lines