# specs/002-canvas-management/tasks/T-001.md

## Task: Model Contract Tests

## Type
contract-test

## Context
- **Phase**: Contracts & Interfaces
- **Builds on**: None
- **Blocks**: T-003 (Model Implementation)
- **Requirements**: FR-001, FR-002, FR-003, FR-004, FR-006

## Predecessors

### Cross-Feature
| Feature | File | Task | Import Statement |
|---------|------|------|------------------|
| 001A-infrastructure | backend/canvas/models/__init__.py | T-006 | `from canvas.models import TimestampMixin` |
| 001-auth | backend/canvas/models/user.py | T-001 | `from canvas.models.user import User` |

### Within Feature
| Task | File | What This Task Imports |
|------|------|------------------------|

## Scope
- **CREATE**: `backend/tests/canvas/test_models_contract.py`

## Contract
```python
def test_vbu_model_contract():
    """VBU model has required fields and relationships."""
    assert hasattr(VBU, 'id')
    assert hasattr(VBU, 'name')
    assert hasattr(VBU, 'gm_id')
    assert hasattr(VBU, 'created_at')
    assert hasattr(VBU, 'updated_at')
    assert hasattr(VBU, 'updated_by')
    assert hasattr(VBU, 'canvas')

def test_canvas_model_contract():
    """Canvas model has required fields and relationships."""
    assert hasattr(Canvas, 'id')
    assert hasattr(Canvas, 'vbu_id')
    assert hasattr(Canvas, 'lifecycle_lane')
    assert hasattr(Canvas, 'currently_testing_type')
    assert hasattr(Canvas, 'currently_testing_id')
    assert hasattr(Canvas, 'theses')

def test_thesis_model_contract():
    """Thesis model has required fields and relationships."""
    assert hasattr(Thesis, 'id')
    assert hasattr(Thesis, 'canvas_id')
    assert hasattr(Thesis, 'order')
    assert hasattr(Thesis, 'text')
    assert hasattr(Thesis, 'proof_points')

def test_proof_point_model_contract():
    """ProofPoint model has required fields and relationships."""
    assert hasattr(ProofPoint, 'id')
    assert hasattr(ProofPoint, 'thesis_id')
    assert hasattr(ProofPoint, 'description')
    assert hasattr(ProofPoint, 'status')
    assert hasattr(ProofPoint, 'attachments')

def test_attachment_model_contract():
    """Attachment model has required fields and relationships."""
    assert hasattr(Attachment, 'id')
    assert hasattr(Attachment, 'proof_point_id')
    assert hasattr(Attachment, 'monthly_review_id')
    assert hasattr(Attachment, 'filename')
    assert hasattr(Attachment, 'storage_path')
    assert hasattr(Attachment, 'content_type')
    assert hasattr(Attachment, 'size_bytes')
    assert hasattr(Attachment, 'uploaded_by')

def test_lifecycle_lane_enum():
    """LifecycleLane enum has required values."""
    assert hasattr(LifecycleLane, 'BUILD')
    assert hasattr(LifecycleLane, 'SELL')
    assert hasattr(LifecycleLane, 'MILK')
    assert hasattr(LifecycleLane, 'REFRAME')

def test_proof_point_status_enum():
    """ProofPointStatus enum has required values."""
    assert hasattr(ProofPointStatus, 'NOT_STARTED')
    assert hasattr(ProofPointStatus, 'IN_PROGRESS')
    assert hasattr(ProofPointStatus, 'OBSERVED')
    assert hasattr(ProofPointStatus, 'STALLED')

def test_currently_testing_type_enum():
    """CurrentlyTestingType enum has required values."""
    assert hasattr(CurrentlyTestingType, 'THESIS')
    assert hasattr(CurrentlyTestingType, 'PROOF_POINT')
```

## Logic
1. Import all model classes and enums from canvas.models
2. Test each model has required attributes using hasattr
3. Test enum classes have required values
4. Verify relationships exist as attributes
5. No database interaction - pure contract verification

## Verification
- [ ] Imports resolve without error
- [ ] All model contracts verified
- [ ] All enum contracts verified
- [ ] Tests pass when models implemented

## LOC Estimate
~80 lines